<%= turbo_frame_tag workflow do %>
  <article class="border">
    <div class="flex pad gap justify-space-between">
      <%= turbo_frame_tag dom_id(workflow, :header) do %>
        <h3 class="txt-nowrap"><%= workflow.name %></h3>

        <div class="flex gap">
          <%= link_to edit_workflow_path(workflow), class: "btn btn--small" do %>
            <%= image_tag "pencil.svg", aria: { hidden: true }, size: 24 %>
          <% end %>

          <%= button_to workflow_path(workflow), method: :delete, class: "btn btn--small", data: { turbo_frame: :workflows, turbo_confirm: "Are you sure you want to delete this workflow?" } do %>
            <%= image_tag "minus.svg", aria: { hidden: true }, size: 24 %>
          <% end %>
        </div>
      <% end %>
    </div>

    <div class="border-top flex flex-column pad gap">
      <%= turbo_frame_tag dom_id(workflow, :stages) do %>
        <%= render partial: "workflows/stages/stage", collection: workflow.stages %>
        <%= link_to "New stage", new_workflow_stage_path(workflow), class: "btn btn--small" %>
      <% end %>
    </div>
  </article>
<% end %>
